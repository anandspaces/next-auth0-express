# ğŸ” Auth0 Email Notification App

A full-stack project using **Next.js 15 + Auth0** for authentication and **Node.js + Express** for backend logic to send a user their JWT token via email after login.

---

## ğŸ“ Project Structure

```
project-root/
â”œâ”€â”€ backend/
â”‚   â””â”€â”€ src/
â”‚       â””â”€â”€ index.js
â”œâ”€â”€ frontend/
â”‚   â””â”€â”€ (Next.js 15 project)
â”œâ”€â”€ README.md
â””â”€â”€ .env (see below)
```

---

## âš™ï¸ Environment Variables

### âœ… Frontend (`frontend/.env`)
```env
NEXT_PUBLIC_AUTH0_DOMAIN=dev-g5mwwnoswygbm18r.us.auth0.com
NEXT_PUBLIC_AUTH0_CLIENT_ID=XD2Wkw3cHCMIv1Fu9HaRA3x2h3gIr7SN
NEXT_PUBLIC_AUTH0_CALLBACK=http://localhost:3000/callback
NEXT_PUBLIC_AUTH0_AUDIENCE=http://localhost:5000
```

### âœ… Backend (`backend/.env`)
```env
AUTH0_DOMAIN=dev-g5mwwnoswygbm18r.us.auth0.com
EMAIL_USERNAME=panthera.sapiens0@gmail.com
EMAIL_PASSWORD=your_app_password_here
```
> ğŸ›¡ï¸ *Use an App Password for Gmail and never commit `.env` files.*

---

## ğŸ§© Frontend Setup

### ğŸ“¦ Dependencies
```
cd frontend
npm install
```

### ğŸš€ Development
```
npm run dev
```

### ğŸ” Auth Flow
- Auth handled with `@auth0/auth0-react`
- On login success, token and email are sent to backend `/auth/callback`
- Backend validates token and sends an email with the token
- After success, frontend redirects to homepage (`/`)

---

## ğŸ”§ Backend Setup

### ğŸ“¦ Dependencies
```
cd backend
npm install
```

### ğŸš€ Start Backend
```
npm start
```

### ğŸ“® API Route: `/auth/callback`
- Expects `{ token, email }` in POST body
- Verifies token with Auth0's `/userinfo` endpoint
- Sends email with token to the user

---

## ğŸ’Œ Email Setup
- Nodemailer is configured to use Gmail SMTP
- Ensure [Less Secure App Access](https://myaccount.google.com/security) is enabled **or** use **App Password** if 2FA is on

---

## âœ… Demo Flow

1. User logs in using Auth0
2. Auth0 redirects to `/callback`
3. Frontend sends `access_token` and `email` to backend
4. Backend validates and sends the token to user's email
5. Frontend redirects user to homepage

---

## ğŸ“¬ Example Email
```
Subject: Your Login Token
Body:
Here is your authentication token:
<JWT TOKEN HERE>
```

---

## ğŸ§  Future Improvements
- Add database to store login history
- Add user-friendly email template
- Add error UI for failed login/token/email
- Secure backend endpoint with Auth0 JWT middleware

---

## ğŸ› ï¸ Built With
- [Next.js 15](https://nextjs.org/)
- [Auth0](https://auth0.com/)
- [Node.js](https://nodejs.org/)
- [Express](https://expressjs.com/)
- [Nodemailer](https://nodemailer.com/about/)
- [TailwindCSS](https://tailwindcss.com/)

---

> âœ¨ Maintained by Anand - 2025

